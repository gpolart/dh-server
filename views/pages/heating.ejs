<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>
</head>
<body class="container-fluid">

    <header>
        <% include ../partials/header %>
    </header>


    <main>
        <div class="row">
            <h1 class="panel-title">Heating module</h1>
            <div class="col-md-6">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Zone name</th>
                            <th>Look at</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% heating.zones.forEach(function(item) { %>
                        <tr>
                            <td><%= item.name %></td>
                            <td><%= item.var %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>

            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 class="panel-title">Configure zone</h2>
                    </div>
                    <div class="panel-content">
                        <form id="heating-form">
                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="name">Name</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="name" placeholder="Name" value="">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-default">OK</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <% include ../partials/footer %>
    </footer>
    
    <% include ../partials/javascript %>
    <script type="text/javascript">
    $(document).ready(function() {

         $('#heating-form').on('submit', function(ev) {
            ev.preventDefault();
            //var type = $('#var-type').val();

            $.ajax({
               url: '/module/heating',
               type: 'POST',
               dataType: 'json',
               data: { action : "edit_zone",
                       params : '{"val1" : "val1", "val2":"val2"}'
                     }
            }).done(function( result ) {
               if ($.isPlainObject(result)) {
                    if (result.status === "OK") {
                    }
                    else {
                        alert('Erreur système');
                    }
                }
                else {
                    alert('Erreur système');
                }
            }).fail(function(err) {
                alert('Erreur  err = ' + err);
            });
         });

    });
    </script> 
</body>
</html>
